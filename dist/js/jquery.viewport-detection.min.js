!function(t,e,n,i){"use strict";function o(e,n){this.settings=t.extend({},f,n),this.container=t(this.settings.target,e),this._defaults=f,this._name=s,this.init()}var s="viewportDetection",l={container:{},elements:[],elementCount:0},f={debug:!1,container:t(e),visible:function(){},invisible:function(){},debounce:{wait:0,immediate:!0},offset:{top:0,right:0,bottom:0,left:0},infinite:!0,target:"> *"};t.extend(o.prototype,{init:function(){this.getContainer(),this.setElements(),this.elementInContainer(),this.scrollEvent().on()},debounce:function(t,e,n){var i;return function(){var o=this,s=arguments,l=function(){i=null,n||t.apply(o,s)},f=n&&!i;clearTimeout(i),i=setTimeout(l,e),f&&t.apply(o,s)}},getContainer:function(){var e=this.settings,n=t(e.container),i=e.offset;return{top:n.scrollTop()+i.top,right:n.scrollLeft()+n.width()+i.right,bottom:n.scrollTop()+n.height()+i.bottom,left:n.scrollLeft()+i.left}},setElements:function(){t.each(this.container,function(){var e=t(this);l.elements.push({infinite:!0,visible:!1,node:e,position:{top:e.offset().top,right:e.offset().left+e.width(),bottom:e.offset().top+e.height(),left:e.offset().left}})})},elementInContainer:function(){var e=this,n=this.getContainer();t.each(l.elements,function(t){var i=l.elements[t];i.position.left<=n.right&&i.position.right>=n.left&&i.position.top<=n.bottom&&i.position.bottom>=n.top?1!=i.visible&&(i.visible=!0,e.handleCallback(e.settings.visible,t),1!=e.settings.infinite&&i.infinite&&l.elementCount++):1==e.settings.infinite&&1==i.visible&&(i.visible=!1,e.handleCallback(e.settings.invisible,t))}),1!=e.settings.infinite&&l.elementCount==l.elements.length&&e.scrollEvent().off()},handleCallback:function(t,e){"function"==typeof t?t(l.elements[e].node):this.settings.debug&&console.error(this._name+": '"+t+"' is not a function.")},scrollEvent:function(){var e,n=this,i=this.settings;return e=n.debounce(function(){n.elementInContainer()},i.debounce.wait,i.debounce.immediate),{on:function(){t(i.container).on("scroll",function(){e()})},off:function(){t(i.container).off("scroll",this.on())}}}}),t.fn[s]=function(e){return this.each(function(){t.data(this,"plugin_"+s+this.classList.value)||(console.log("plugin_"+s+this.classList.value),t.data(this,"plugin_"+s+this.classList.value,new o(this,e)))})}}(jQuery,window,document);